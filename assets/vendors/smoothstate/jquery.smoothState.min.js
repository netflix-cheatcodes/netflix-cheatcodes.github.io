!function(t,n,o,e){"use strict";if(!n.history.pushState)return t.fn.smoothState=function(){return this},void(t.fn.smoothState.options={});if(!t.fn.smoothState){var r=t("html, body"),a=n.console||!1,s={anchors:"a",prefetch:!1,blacklist:".no-smoothstate, [target]",development:!1,pageCacheSize:0,alterRequestUrl:function(t){return t},onStart:{duration:0,render:function(){r.scrollTop(0)}},onProgress:{duration:0,render:function(){r.css("cursor","wait"),r.find("a").css("cursor","wait")}},onEnd:{duration:0,render:function(t,n,o){r.css("cursor","auto"),r.find("a").css("cursor","auto"),n.html(o)}},callback:function(){}},i={isExternal:function(t){var o=t.match(/^([^:\/?#]+:)?(?:\/\/([^\/?#]*))?([^?#]+)?(\?[^#]*)?(#.*)?/);return"string"==typeof o[1]&&o[1].length>0&&o[1].toLowerCase()!==n.location.protocol?!0:"string"==typeof o[2]&&o[2].length>0&&o[2].replace(new RegExp(":("+{"http:":80,"https:":443}[n.location.protocol]+")?$"),"")!==n.location.host?!0:!1},stripHash:function(t){return t.replace(/#.*/,"")},isHash:function(t,o){o=o||n.location.href;var e=t.indexOf("#")>-1?!0:!1,r=i.stripHash(t)===i.stripHash(o)?!0:!1;return e&&r},shouldLoad:function(t,n){var o=t.prop("href");return!i.isExternal(o)&&!i.isHash(o)&&!t.is(n)},clearIfOverCapacity:function(t,n){return Object.keys||(Object.keys=function(t){var n,o=[];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&o.push(n);return o}),Object.keys(t).length>n&&(t={}),t},storePageIn:function(n,e,r,a){var s;return r instanceof HTMLDocument?s=r:(s=o.implementation.createHTMLDocument(""),s.open(),s.write(r),s.close()),n[e]={status:"loaded",title:s.title,html:t(s.getElementById(a))},n},triggerAllAnimationEndEvent:function(n,o){o=" "+o||"";var e=0,r="animationstart webkitAnimationStart oanimationstart MSAnimationStart",a="animationend webkitAnimationEnd oanimationend MSAnimationEnd",s="allanimationend",c=function(o){t(o.delegateTarget).is(n)&&(o.stopPropagation(),e++)},l=function(o){t(o.delegateTarget).is(n)&&(o.stopPropagation(),e--,0===e&&n.trigger(s))};n.on(r,c),n.on(a,l),n.on("allanimationend"+o,function(){e=0,i.redraw(n)})},redraw:function(t){t.height()}},c=function(o){if(null!==o.state){var e=n.location.href,r=t("#"+o.state.id),a=r.data("smoothState");a.href===e||i.isHash(e,a.href)||a.load(e,!1)}},l=function(e,s){var c=t(e),l=c.prop("id"),u=null,d=!1,h={},f=n.location.href,p=function(t){t=t||!1,t&&h.hasOwnProperty(t)?delete h[t]:h={},c.data("smoothState").cache=h},m=function(n,o){if(o=o||null,!h.hasOwnProperty(n)){h=i.clearIfOverCapacity(h,s.pageCacheSize),h[n]={status:"fetching"};var e=s.alterRequestUrl(n)||n,r=t.ajax(e,{dataType:"html"});r.success(function(t){i.storePageIn(h,n,t,l),c.data("smoothState").cache=h}),r.error(function(){h[n].status="error"}),o&&r.complete(o)}},g=function(e){var i="#"+l,f=h[e]?t(h[e].html.html()):null;f?(o.title=h[e].title,c.data("smoothState").href=e,s.onEnd.render(e,c,f,h[e].html),c.one("ss.onEndEnd",function(){if(d=!1,s.callback(e,c,f,h[e].html),u){var n=t(u,c),o=n.offset().top;r.animate({scrollTop:o},250),u=null}}),n.setTimeout(function(){c.trigger("ss.onEndEnd")},s.onEnd.duration)):!f&&s.development&&a?a.warn("No element with an id of "+i+" in response from "+e+" in "+h):n.location=e},v=function(t,o){o=o||!0;var e=!1,r=!1,i={loaded:function(){var a=e?"ss.onProgressEnd":"ss.onStartEnd";r&&e?r&&g(t):c.one(a,function(){g(t)}),o&&n.history.pushState({id:l},h[t].title,t)},fetching:function(){e||(e=!0,c.one("ss.onStartEnd",function(){s.onProgress.render(t,c,null),n.setTimeout(function(){c.trigger("ss.onProgressEnd"),r=!0},s.onProgress.duration)})),n.setTimeout(function(){h.hasOwnProperty(t)&&i[h[t].status]()},10)},error:function(){s.development&&a?a.log("There was an error loading: "+t):n.location=t}};h.hasOwnProperty(t)||m(t),s.onStart.render(t,c,null),n.setTimeout(function(){c.trigger("ss.onStartEnd")},s.onStart.duration),i[h[t].status]()},S=function(n){var o=t(n.currentTarget);i.shouldLoad(o,s.blacklist)&&!d&&(n.stopPropagation(),m(o.prop("href")))},E=function(n){var o=t(n.currentTarget),e=o.prop("href");n.metaKey||n.ctrlKey||!i.shouldLoad(o,s.blacklist)||(d=!0,n.stopPropagation(),n.preventDefault(),u=o.prop("hash"),v(e))},y=function(t){t.on("click",s.anchors,E),s.prefetch&&t.on("mouseover touchstart",s.anchors,S)},w=function(t){var o=c.addClass(t).prop("class");c.removeClass(o),n.setTimeout(function(){c.addClass(o)},0),c.one("ss.onStartEnd ss.onProgressEnd ss.onEndEnd",function(){c.removeClass(t)})},P=function(){var t=c.prop("class");c.removeClass(t),i.redraw(c),c.addClass(t)};return s=t.extend({},t.fn.smoothState.options,s),null===n.history.state&&n.history.replaceState({id:l},o.title,f),i.storePageIn(h,f,o.documentElement.outerHTML,l),i.triggerAllAnimationEndEvent(c,"ss.onStartEnd ss.onProgressEnd ss.onEndEnd"),y(c),{href:f,cache:h,clear:p,load:v,fetch:m,toggleAnimationClass:w,restartCSSAnimations:P}},u=function(n){return this.each(function(){this.id&&!t.data(this,"smoothState")?t.data(this,"smoothState",new l(this,n)):!this.id&&a&&a.warn("Every smoothState container needs an id but the following one does not have one:",this)})};n.onpopstate=c,t.smoothStateUtility=i,t.fn.smoothState=u,t.fn.smoothState.options=s}}(jQuery,window,document);